(()=>{function e(){window.location.search.includes("?v=")&&chrome.storage.local.get("accessToken",(e=>{e.accessToken?function(){if(document.getElementById("youtube-extension-popup"))return;const e=document.createElement("div");e.id="youtube-extension-popup",e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.width="300px",e.style.padding="20px",e.style.backgroundColor="#fff",e.style.border="1px solid #ccc",e.style.borderRadius="5px",e.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)",e.style.zIndex="9999",e.innerHTML='\n      <h3>Video Actions</h3>\n      <div>\n          <input type="checkbox" id="like-checkbox"> Like<br>\n          <input type="checkbox" id="comment-checkbox"> Comment<br>\n          <input type="text" id="comment-input" placeholder="Enter your comment" value="Amazing video!" style="width: 100%; margin-top: 5px;" disabled><br>\n          <input type="checkbox" id="subscribe-checkbox"> Subscribe<br>\n      </div>\n      <button id="execute-actions-btn" disabled style="margin-top: 10px;">Execute</button>\n      <button id="close-popup-btn" style="margin-top: 10px;">Close</button>\n  ',document.body.appendChild(e);const t=document.getElementById("like-checkbox"),o=document.getElementById("comment-checkbox"),n=document.getElementById("subscribe-checkbox"),s=document.getElementById("comment-input"),c=document.getElementById("execute-actions-btn");function i(){c.disabled=!(t.checked||o.checked||n.checked)}o.addEventListener("change",(()=>{s.disabled=!o.checked,i()})),[t,o,n].forEach((e=>e.addEventListener("change",i))),c.addEventListener("click",(()=>{!function(e){const t=document.getElementById("like-checkbox").checked,o=document.getElementById("comment-checkbox").checked,n=document.getElementById("subscribe-checkbox").checked;t&&function(){const e=new URLSearchParams(window.location.search).get("v");chrome.storage.local.get("accessToken",(t=>{t.accessToken?chrome.runtime.sendMessage({type:"LIKE_VIDEO",payload:{videoId:e,accessToken:t.accessToken}},(e=>{e.success?alert("Video liked successfully! To see liked video, please refresh your browser and if you still don't see the video liked, please wait for some time as youtube apis take some time to reflect.\""):(console.error("Failed to like the video:",e.error),alert(`Error liking the video. ${e.error}`))})):alert("No access token found. Please authenticate first.")}))}(),o&&function(e="Amazing video!"){if(e){const t=new URLSearchParams(window.location.search).get("v");chrome.storage.local.get("accessToken",(o=>{o.accessToken?chrome.runtime.sendMessage({type:"COMMENT_VIDEO",payload:{videoId:t,commentText:e,accessToken:o.accessToken}},(e=>{e.success?alert("Comment posted successfully! To see the comment, please refresh your browser and if you still don't see the comment, please wait for some time as youtube apis take some time to reflect."):(console.error("Failed to post comment:",e.error),alert(`Failed to post comment. ${null==e?void 0:e.error} `))})):alert("No access token found. Please authenticate first.")}))}}(e),n&&function(){const e=function(){const e=document.querySelector('span[itemprop="author"]');if(e){const t=e.querySelector('link[itemprop="url"]');if(t&&t.href)return t.href.split("@")[1]}return null}();e?chrome.storage.local.get("accessToken",(t=>{t.accessToken?chrome.runtime.sendMessage({type:"FETCH_CHANNEL_ID_AND_SUBSCRIBE",payload:{handle:e,accessToken:t.accessToken}},(e=>{e.success?alert("Successfully subscribed to the channel! To see the subscribed status, please refresh your browser and if you still don't see channel subscribed, please wait for some time as youtube apis take some time to reflect."):alert(`Failed to subscribe. ${null==e?void 0:e.error} `)})):alert("No access token found. Please authenticate first.")})):console.error("Channel handle not found on the page.")}()}(s.value),e.remove()})),document.getElementById("close-popup-btn").addEventListener("click",(()=>{e.remove()}))}():function(){if(document.getElementById("session-expired-popup"))return;const e=document.createElement("div");e.id="session-expired-popup",e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.width="300px",e.style.padding="20px",e.style.backgroundColor="#fff",e.style.border="1px solid #ccc",e.style.borderRadius="5px",e.style.boxShadow="0 4px 8px rgba(0,0,0,0.1)",e.style.zIndex="9999",e.innerHTML='\n      <h3>YouClick Session Expired</h3>\n      <p>Your YouClick session has expired. Please log in to continue.</p>\n      <button id="login-link" style="color: red; text-decoration: underline;">Log in</button>\n      <button id="close-session-popup-btn" style="margin-top: 10px;">Close</button>\n  ',document.body.appendChild(e),document.getElementById("close-session-popup-btn").addEventListener("click",(()=>{e.remove()})),document.getElementById("login-link").addEventListener("click",(()=>{e.remove(),window.open("https://you-click-dashboard.vercel.app/","_blank")}))}()}))}window.onload=()=>{e()},function(){let t=window.location.href;new MutationObserver((()=>{const o=window.location.href;o!==t&&(t=o,e())})).observe(document.body,{childList:!0,subtree:!0})}()})();